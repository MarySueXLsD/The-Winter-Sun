sampler2D Input : register(s0);
float4 ColorKey : register(c0);
float Tolerance : register(c1);

float4 main(float2 uv : TEXCOORD) : COLOR
{
    float4 color = tex2D(Input, uv);
    float3 diff = abs(color.rgb - ColorKey.rgb);
    float maxDiff = max(max(diff.r, diff.g), diff.b);
    
    if (maxDiff < Tolerance)
    {
        color.a = 0.0;
    }
    
    return color;
}

