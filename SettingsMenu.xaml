<Window x:Class="VisualNovel.SettingsMenu"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Settings" Height="700" Width="900"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        ShowInTaskbar="False"
        KeyDown="Window_KeyDown">
    <Window.Resources>
        <!-- Minecraft Font Family (will be set programmatically) -->
        <FontFamily x:Key="MinecraftFont">Arial</FontFamily>
        
        <!-- ScrollBar Line Button Style (for up/down arrows) - Must be defined before GameScrollBarStyle -->
        <Style x:Key="ScrollBarLineButtonStyle" TargetType="RepeatButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Focusable" Value="False"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border Background="{TemplateBinding Background}" 
                               BorderThickness="{TemplateBinding BorderThickness}"
                               Width="14"
                               Height="14">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"
                                            Content="{TemplateBinding Content}">
                                <ContentPresenter.Resources>
                                    <Style TargetType="Path">
                                        <Setter Property="Fill" Value="#60FFFFFF"/>
                                        <Setter Property="Stretch" Value="Uniform"/>
                                    </Style>
                                </ContentPresenter.Resources>
                            </ContentPresenter>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#20FFFFFF"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#40FFFFFF"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Custom ScrollBar Thumb Style -->
        <Style x:Key="GameScrollBarThumbStyle" TargetType="Thumb">
            <Setter Property="Background" Value="#40FFFFFF"/>
            <Setter Property="BorderBrush" Value="#60FFFFFF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border Background="{TemplateBinding Background}" 
                               BorderBrush="{TemplateBinding BorderBrush}"
                               BorderThickness="{TemplateBinding BorderThickness}"
                               CornerRadius="2">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF8B7355" BlurRadius="2" ShadowDepth="1" Opacity="0.3"/>
                            </Border.Effect>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#60FFFFFF"/>
                    <Setter Property="BorderBrush" Value="#FFFFD700"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
                <Trigger Property="IsDragging" Value="True">
                    <Setter Property="Background" Value="#80FFFFFF"/>
                    <Setter Property="BorderBrush" Value="#FFFFD700"/>
                    <Setter Property="BorderThickness" Value="2"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Custom ScrollBar Style -->
        <Style x:Key="GameScrollBarStyle" TargetType="ScrollBar">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Width" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollBar">
                        <Grid x:Name="GridRoot">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="0*" MaxHeight="0"/>
                                <RowDefinition Height="0.00001*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Border Grid.Row="1" 
                                   Background="Transparent"
                                   BorderBrush="#20FFFFFF"
                                   BorderThickness="0,0,1,0"
                                   Margin="0,2,0,2"/>
                            <Track x:Name="PART_Track" 
                                  Grid.Row="1" 
                                  IsDirectionReversed="True"
                                  Focusable="False">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource ScrollBarLineButtonStyle}" 
                                                 Command="ScrollBar.LineUpCommand" 
                                                 Content="M 0 4 L 4 4 L 2 0 Z"/>
                                </Track.DecreaseRepeatButton>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource ScrollBarLineButtonStyle}" 
                                                 Command="ScrollBar.LineDownCommand" 
                                                 Content="M 0 0 L 4 0 L 2 4 Z"/>
                                </Track.IncreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource GameScrollBarThumbStyle}"/>
                                </Track.Thumb>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ScrollViewer Style -->
        <Style x:Key="GameScrollViewerStyle" TargetType="ScrollViewer">
            <Setter Property="Padding" Value="15,10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ScrollViewer">
                        <Border Background="Transparent"
                               BorderBrush="#40FFFFFF"
                               BorderThickness="1"
                               CornerRadius="2">
                            <Grid x:Name="Grid" Background="{TemplateBinding Background}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>
                                <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" 
                                                      CanContentScroll="{TemplateBinding CanContentScroll}" 
                                                      CanHorizontallyScroll="False" 
                                                      CanVerticallyScroll="False" 
                                                      ContentTemplate="{TemplateBinding ContentTemplate}" 
                                                      Content="{TemplateBinding Content}" 
                                                      Grid.Column="0" 
                                                      Margin="{TemplateBinding Padding}"/>
                                <ScrollBar x:Name="PART_VerticalScrollBar" 
                                         AutomationProperties.AutomationId="VerticalScrollBar" 
                                         Cursor="Arrow" 
                                         Grid.Column="1" 
                                         Maximum="{TemplateBinding ScrollableHeight}" 
                                         Minimum="0" 
                                         Orientation="Vertical" 
                                         ViewportSize="{TemplateBinding ViewportHeight}" 
                                         Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}" 
                                         Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                         Style="{StaticResource GameScrollBarStyle}"
                                         Margin="5,0,0,0"/>
                                <ScrollBar x:Name="PART_HorizontalScrollBar" 
                                         AutomationProperties.AutomationId="HorizontalScrollBar" 
                                         Cursor="Arrow" 
                                         Grid.Column="0" 
                                         Grid.Row="1" 
                                         Maximum="{TemplateBinding ScrollableWidth}" 
                                         Minimum="0" 
                                         Orientation="Horizontal" 
                                         ViewportSize="{TemplateBinding ViewportWidth}" 
                                         Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}, UpdateSourceTrigger=PropertyChanged}" 
                                         Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                         Style="{StaticResource GameScrollBarStyle}"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <!-- Tab Button Style -->
        <Style x:Key="TabButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#CCFFFFFF"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,12"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                               BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                             VerticalAlignment="Center"
                                             Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#20FFFFFF"/>
                    <Setter Property="Foreground" Value="#FFFFD700"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Foreground" Value="#40404040"/>
                    <Setter Property="Opacity" Value="0.4"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Active Tab Button Style -->
        <Style x:Key="ActiveTabButtonStyle" TargetType="Button" BasedOn="{StaticResource TabButtonStyle}">
            <Setter Property="Background" Value="#30FFFFFF"/>
            <Setter Property="Foreground" Value="#FFFFD700"/>
            <Setter Property="BorderThickness" Value="0,0,0,2"/>
            <Setter Property="BorderBrush" Value="#FFFFD700"/>
        </Style>

        <!-- Dialog Button Style -->
        <Style x:Key="DialogButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="120"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#CCFFFFFF"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BorderBrush" Value="#40FFFFFF"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                               BorderBrush="{TemplateBinding BorderBrush}" 
                               BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                             VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#20FFFFFF"/>
                    <Setter Property="BorderBrush" Value="#FFFFD700"/>
                    <Setter Property="Foreground" Value="#FFFFD700"/>
                </Trigger>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="Transparent"/>
                    <Setter Property="BorderBrush" Value="#40404040"/>
                    <Setter Property="Foreground" Value="#60606060"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Reset Button Style (Wider) -->
        <Style x:Key="ResetButtonStyle" TargetType="Button" BasedOn="{StaticResource DialogButtonStyle}">
            <Setter Property="Width" Value="240"/>
        </Style>

        <!-- Setting Label Style -->
        <Style x:Key="SettingLabelStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#CCFFFFFF"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
        </Style>

        <!-- Setting Value Style -->
        <Style x:Key="SettingValueStyle" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#FFFFD700"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="MinWidth" Value="80"/>
            <Setter Property="TextAlignment" Value="Right"/>
        </Style>

        <!-- CheckBox Style -->
        <Style x:Key="SettingCheckBoxStyle" TargetType="CheckBox">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#CCFFFFFF"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Border x:Name="CheckBoxBorder" 
                                   Grid.Column="0"
                                   Width="18" Height="18" 
                                   Background="#E0E8D4B0"
                                   BorderBrush="#FFD4C4A0" 
                                   BorderThickness="2"
                                   Margin="0,0,8,0">
                                <Border.Effect>
                                    <DropShadowEffect Color="#FF8B7355" BlurRadius="3" ShadowDepth="1" Opacity="0.4"/>
                                </Border.Effect>
                                <Path x:Name="CheckMark" 
                                     Data="M 3,7 L 7,11 L 15,3" 
                                     Stroke="#FF8B4513" 
                                     StrokeThickness="2" 
                                     Visibility="Collapsed"
                                     Stretch="Uniform"/>
                            </Border>
                            <ContentPresenter Grid.Column="1" 
                                            VerticalAlignment="Center"
                                            Margin="0,0,0,0"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="CheckBoxBorder" Property="Background" Value="#FFD4C4A0"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="CheckBoxBorder" Property="BorderBrush" Value="#FFFFD700"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Slider Track Style -->
        <Style x:Key="SliderButtonStyle" TargetType="RepeatButton">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="IsTabStop" Value="false"/>
            <Setter Property="Focusable" Value="true"/>
            <EventSetter Event="PreviewMouseLeftButtonDown" Handler="SliderTrack_MouseDown"/>
            <EventSetter Event="PreviewMouseMove" Handler="SliderTrack_MouseMove"/>
            <EventSetter Event="PreviewMouseLeftButtonUp" Handler="SliderTrack_MouseUp"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="RepeatButton">
                        <Border Background="#E0E8D4B0" 
                               BorderBrush="#FFD4C4A0" 
                               BorderThickness="1"
                               Height="20"
                               CornerRadius="2">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF8B7355" BlurRadius="2" ShadowDepth="1" Opacity="0.3"/>
                            </Border.Effect>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="RepeatButton">
                                <Border Background="#F0F8E4C0" 
                                       BorderBrush="#FFFFD700" 
                                       BorderThickness="1"
                                       Height="20"
                                       CornerRadius="2">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FFFFD700" BlurRadius="3" ShadowDepth="1" Opacity="0.4"/>
                                    </Border.Effect>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="RepeatButton">
                                <Border Background="#E0E8D4B0" 
                                       BorderBrush="#FFFFD700" 
                                       BorderThickness="2"
                                       Height="20"
                                       CornerRadius="2">
                                    <Border.Effect>
                                        <DropShadowEffect Color="#FFFFD700" BlurRadius="4" ShadowDepth="1" Opacity="0.5"/>
                                    </Border.Effect>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- Slider Thumb Style -->
        <Style x:Key="SliderThumbStyle" TargetType="Thumb">
            <Setter Property="SnapsToDevicePixels" Value="true"/>
            <Setter Property="OverridesDefaultStyle" Value="true"/>
            <Setter Property="Height" Value="16"/>
            <Setter Property="Width" Value="16"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Thumb">
                        <Border Background="#FFD4C4A0" 
                               BorderBrush="#FF8B7355" 
                               BorderThickness="2"
                               CornerRadius="2">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF8B7355" BlurRadius="3" ShadowDepth="1" Opacity="0.5"/>
                            </Border.Effect>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Slider Style -->
        <Style x:Key="GameSliderStyle" TargetType="Slider">
            <Setter Property="Height" Value="20"/>
            <Setter Property="IsMoveToPointEnabled" Value="True"/>
            <Setter Property="Cursor" Value="{x:Null}"/>
            <EventSetter Event="PreviewMouseMove" Handler="Slider_PreviewMouseMove"/>
            <EventSetter Event="PreviewMouseLeftButtonUp" Handler="Slider_PreviewMouseLeftButtonUp"/>
            <EventSetter Event="LostMouseCapture" Handler="Slider_LostMouseCapture"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto" MinHeight="20"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Track x:Name="PART_Track" Grid.Row="1" IsDirectionReversed="False">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource SliderButtonStyle}" 
                                                 Command="Slider.DecreaseLarge" 
                                                 CommandParameter="{Binding RelativeSource={RelativeSource TemplatedParent}}"/>
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Style="{StaticResource SliderThumbStyle}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Style="{StaticResource SliderButtonStyle}" 
                                                 Command="Slider.IncreaseLarge"
                                                 CommandParameter="{Binding RelativeSource={RelativeSource TemplatedParent}}"/>
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TextBox Style -->
        <Style x:Key="GameTextBoxStyle" TargetType="TextBox">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#5A4A3A"/>
            <Setter Property="Background" Value="#E0E8D4B0"/>
            <Setter Property="BorderBrush" Value="#FFD4C4A0"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}" 
                               BorderBrush="{TemplateBinding BorderBrush}" 
                               BorderThickness="{TemplateBinding BorderThickness}"
                               CornerRadius="2">
                            <Border.Effect>
                                <DropShadowEffect Color="#FF8B7355" BlurRadius="3" ShadowDepth="1" Opacity="0.4"/>
                            </Border.Effect>
                            <ScrollViewer x:Name="PART_ContentHost" 
                                        Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#FFFFD700"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ComboBox Style -->
        <Style x:Key="GameComboBoxStyle" TargetType="ComboBox">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#5A4A3A"/>
            <Setter Property="Background" Value="#E0E8D4B0"/>
            <Setter Property="BorderBrush" Value="#FFD4C4A0"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBox">
                        <Grid>
                            <Border Background="{TemplateBinding Background}" 
                                   BorderBrush="{TemplateBinding BorderBrush}" 
                                   BorderThickness="{TemplateBinding BorderThickness}"
                                   CornerRadius="2">
                                <Border.Effect>
                                    <DropShadowEffect Color="#FF8B7355" BlurRadius="3" ShadowDepth="1" Opacity="0.4"/>
                                </Border.Effect>
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <ToggleButton x:Name="ToggleButton" 
                                                Grid.Column="1" 
                                                Focusable="false"
                                                ClickMode="Press"
                                                IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}">
                                        <ToggleButton.Template>
                                            <ControlTemplate TargetType="ToggleButton">
                                                <Border Background="Transparent" 
                                                       BorderThickness="0">
                                                    <Path x:Name="Arrow" 
                                                         HorizontalAlignment="Center" 
                                                         VerticalAlignment="Center" 
                                                         Margin="8,0,8,0"
                                                         Data="M 0,0 L 4,4 L 8,0 Z" 
                                                         Fill="#5A4A3A"/>
                                                </Border>
                                            </ControlTemplate>
                                        </ToggleButton.Template>
                                    </ToggleButton>
                                    <ContentPresenter x:Name="ContentSite" 
                                                    Grid.Column="0"
                                                    IsHitTestVisible="False" 
                                                    Content="{TemplateBinding SelectionBoxItem}"
                                                    ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                                    ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                                    Margin="8,4,0,4"
                                                    VerticalAlignment="Center"
                                                    HorizontalAlignment="Left"/>
                                    <TextBox x:Name="PART_EditableTextBox"
                                           Grid.Column="0"
                                           Style="{x:Null}"
                                           FontFamily="{StaticResource MinecraftFont}"
                                           HorizontalAlignment="Left"
                                           VerticalAlignment="Center"
                                           Margin="8,4,0,4"
                                           Focusable="True"
                                           Background="Transparent"
                                           Foreground="#5A4A3A"
                                           BorderThickness="0"
                                           Padding="0"
                                           IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}"/>
                                    <!-- Clickable area for entire ComboBox content area -->
                                    <Border Grid.Column="0" 
                                           Background="Transparent"
                                           MouseLeftButtonDown="ComboBoxArea_MouseDown">
                                    </Border>
                                </Grid>
                            </Border>
                            <Popup x:Name="Popup"
                                 Placement="Bottom"
                                 IsOpen="{TemplateBinding IsDropDownOpen}"
                                 AllowsTransparency="True" 
                                 Focusable="False"
                                 PopupAnimation="Slide">
                                <Grid x:Name="DropDown"
                                     SnapsToDevicePixels="True" 
                                     MinWidth="{TemplateBinding ActualWidth}"
                                     MaxHeight="{TemplateBinding MaxDropDownHeight}"
                                     Cursor="{x:Null}">
                                    <Border x:Name="DropDownBorder"
                                           Background="#FFE8D4B0"
                                           BorderThickness="2"
                                           BorderBrush="#FFD4C4A0"
                                           Cursor="{x:Null}">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#FF8B7355" BlurRadius="8" ShadowDepth="2" Opacity="0.6"/>
                                        </Border.Effect>
                                        <ScrollViewer Margin="4,6,4,6" 
                                                    SnapsToDevicePixels="True"
                                                    Cursor="{x:Null}">
                                            <StackPanel IsItemsHost="True" 
                                                      KeyboardNavigation.DirectionalNavigation="Contained"
                                                      Cursor="{x:Null}"/>
                                        </ScrollViewer>
                                    </Border>
                                </Grid>
                            </Popup>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEditable" Value="true">
                                <Setter Property="IsTabStop" Value="false"/>
                                <Setter TargetName="PART_EditableTextBox" Property="Visibility" Value="Visible"/>
                                <Setter TargetName="ContentSite" Property="Visibility" Value="Hidden"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- ComboBoxItem Style -->
        <Style x:Key="GameComboBoxItemStyle" TargetType="ComboBoxItem">
            <Setter Property="FontFamily" Value="{StaticResource MinecraftFont}"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Foreground" Value="#5A4A3A"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Cursor" Value="{x:Null}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border Background="{TemplateBinding Background}" 
                               BorderThickness="0"
                               Padding="{TemplateBinding Padding}"
                               Cursor="{x:Null}">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#30FFFFFF"/>
                    <Setter Property="Foreground" Value="#3A2A1A"/>
                </Trigger>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#50FFFFFF"/>
                    <Setter Property="Foreground" Value="#3A2A1A"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    
    <Border Background="#E0000000" 
           BorderBrush="#60FFFFFF" 
           BorderThickness="3">
        <Border.Effect>
            <DropShadowEffect BlurRadius="0" 
                             ShadowDepth="3" 
                             Color="Black" 
                             Opacity="0.9"/>
        </Border.Effect>
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock x:Name="TitleText" 
                      Grid.Row="0"
                      Text="Settings" 
                      FontFamily="{StaticResource MinecraftFont}"
                      FontSize="32" 
                      FontWeight="Bold" 
                      Foreground="#FFFFD700"
                      Margin="0,0,0,20">
                <TextBlock.Effect>
                    <DropShadowEffect BlurRadius="0" 
                                     ShadowDepth="2" 
                                     Color="#FFFFD700" 
                                     Opacity="0.8"/>
                </TextBlock.Effect>
            </TextBlock>

            <!-- Tab Navigation and Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Tab Buttons -->
                <StackPanel Grid.Column="0" Margin="0,0,20,0">
                    <Button x:Name="AudioTabButton" Content="Audio" 
                           Style="{StaticResource ActiveTabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="TextTabButton" Content="Text" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="DisplayTabButton" Content="Display" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="OptimisationTabButton" Content="Optimisation" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="GameplayTabButton" Content="Gameplay" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="ControlsTabButton" Content="Controls" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="AccessibilityTabButton" Content="Accessibility" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                    <Button x:Name="LanguageTabButton" Content="Language" 
                           Style="{StaticResource TabButtonStyle}"
                           Click="TabButton_Click"/>
                </StackPanel>

                <!-- Content Area with ScrollViewer -->
                <ScrollViewer Grid.Column="1" 
                            VerticalScrollBarVisibility="Auto"
                            HorizontalScrollBarVisibility="Disabled"
                            Style="{StaticResource GameScrollViewerStyle}">
                    <StackPanel x:Name="ContentPanel" Margin="0,0,10,0">
                        <!-- Audio Settings -->
                        <StackPanel x:Name="AudioSettingsPanel" Visibility="Visible">
                            <TextBlock x:Name="MasterVolumeLabel" Text="Master Volume" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="MasterVolumeSlider" Grid.Column="0" 
                                       Minimum="0" Maximum="100" Value="100" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="MasterVolumeSlider_ValueChanged"/>
                                <TextBlock x:Name="MasterVolumeValue" Grid.Column="1" 
                                         Text="100%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <TextBlock x:Name="MusicVolumeLabel" Text="Music Volume" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="MusicVolumeSlider" Grid.Column="0" 
                                       Minimum="0" Maximum="100" Value="50" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="MusicVolumeSlider_ValueChanged"/>
                                <TextBlock x:Name="MusicVolumeValue" Grid.Column="1" 
                                         Text="50%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <TextBlock x:Name="SoundEffectsVolumeLabel" Text="Sound Effects Volume" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="SoundEffectsVolumeSlider" Grid.Column="0" 
                                       Minimum="0" Maximum="100" Value="70" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="SoundEffectsVolumeSlider_ValueChanged"/>
                                <TextBlock x:Name="SoundEffectsVolumeValue" Grid.Column="1" 
                                         Text="70%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="MuteMusicCheckBox" Content="Mute Music" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="MuteMusicCheckBox_Changed" Unchecked="MuteMusicCheckBox_Changed"/>
                            <CheckBox x:Name="MuteSoundEffectsCheckBox" Content="Mute Sound Effects" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="MuteSoundEffectsCheckBox_Changed" Unchecked="MuteSoundEffectsCheckBox_Changed"/>
                        </StackPanel>

                        <!-- Text Settings -->
                        <StackPanel x:Name="TextSettingsPanel" Visibility="Collapsed">
                            <TextBlock x:Name="TextSpeedLabel" Text="Text Speed" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="TextSpeedSlider" Grid.Column="0" 
                                       Minimum="5" Maximum="100" Value="30" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="TextSpeedSlider_ValueChanged"/>
                                <TextBlock x:Name="TextSpeedValue" Grid.Column="1" 
                                         Text="30ms" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <TextBlock x:Name="FontSizeLabel" Text="Font Size" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="FontSizeSlider" Grid.Column="0" 
                                       Minimum="16" Maximum="40" Value="28" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="FontSizeSlider_ValueChanged"/>
                                <TextBlock x:Name="FontSizeValue" Grid.Column="1" 
                                         Text="28" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="AutoAdvanceCheckBox" Content="Auto Advance Text" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="AutoAdvanceCheckBox_Changed" Unchecked="AutoAdvanceCheckBox_Changed"/>
                            
                            <TextBlock x:Name="AutoAdvanceDelayLabel" Text="Auto Advance Delay" Style="{StaticResource SettingLabelStyle}" 
                                     Margin="0,10,0,10" IsEnabled="{Binding ElementName=AutoAdvanceCheckBox, Path=IsChecked}"/>
                            <Grid Margin="0,0,0,20" IsEnabled="{Binding ElementName=AutoAdvanceCheckBox, Path=IsChecked}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="AutoAdvanceDelaySlider" Grid.Column="0" 
                                       Minimum="1000" Maximum="10000" Value="3000" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="AutoAdvanceDelaySlider_ValueChanged"/>
                                <TextBlock x:Name="AutoAdvanceDelayValue" Grid.Column="1" 
                                         Text="3.0s" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="SkipUnreadTextCheckBox" Content="Skip Unread Text" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="SkipUnreadTextCheckBox_Changed" Unchecked="SkipUnreadTextCheckBox_Changed"/>
                            <CheckBox x:Name="SkipReadTextCheckBox" Content="Skip Read Text" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="SkipReadTextCheckBox_Changed" Unchecked="SkipReadTextCheckBox_Changed"/>
                        </StackPanel>

                        <!-- Display Settings -->
                        <StackPanel x:Name="DisplaySettingsPanel" Visibility="Collapsed">
                            <CheckBox x:Name="FullscreenCheckBox" Content="Fullscreen" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="FullscreenCheckBox_Changed" Unchecked="FullscreenCheckBox_Changed"/>

                            <TextBlock x:Name="WindowWidthLabel" Text="Window Width" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="WindowWidthSlider" Grid.Column="0" 
                                       Minimum="800" Maximum="3840" Value="1920" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="WindowWidthSlider_ValueChanged"/>
                                <TextBlock x:Name="WindowWidthValue" Grid.Column="1" 
                                         Text="1920" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <TextBlock x:Name="WindowHeightLabel" Text="Window Height" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="WindowHeightSlider" Grid.Column="0" 
                                       Minimum="600" Maximum="2160" Value="1080" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="WindowHeightSlider_ValueChanged"/>
                                <TextBlock x:Name="WindowHeightValue" Grid.Column="1" 
                                         Text="1080" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="VSyncCheckBox" Content="VSync" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="VSyncCheckBox_Changed" Unchecked="VSyncCheckBox_Changed"/>
                            
                            <TextBlock x:Name="TargetFPSLabel" Text="Target FPS" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="TargetFPSSlider" Grid.Column="0" 
                                       Minimum="30" Maximum="240" Value="60" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="TargetFPSSlider_ValueChanged"/>
                                <TextBlock x:Name="TargetFPSValue" Grid.Column="1" 
                                         Text="60" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="ShowFPSCheckBox" Content="Show FPS Counter" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="ShowFPSCheckBox_Changed" Unchecked="ShowFPSCheckBox_Changed"/>
                        </StackPanel>

                        <!-- Optimisation Settings -->
                        <StackPanel x:Name="OptimisationSettingsPanel" Visibility="Collapsed">
                            <TextBlock x:Name="GraphicsQualityLabel" Text="Graphics Quality" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <ComboBox x:Name="GraphicsQualityComboBox" 
                                     Margin="0,0,0,20"
                                     Style="{StaticResource GameComboBoxStyle}"
                                     SelectionChanged="GraphicsQualityComboBox_SelectionChanged">
                                <ComboBox.ItemContainerStyle>
                                    <Style TargetType="ComboBoxItem" BasedOn="{StaticResource GameComboBoxItemStyle}"/>
                                </ComboBox.ItemContainerStyle>
                                <ComboBoxItem Content="Low" IsSelected="False"/>
                                <ComboBoxItem Content="Medium" IsSelected="False"/>
                                <ComboBoxItem Content="High" IsSelected="True"/>
                            </ComboBox>

                            <CheckBox x:Name="EnableEffectsCheckBox" Content="Enable Visual Effects" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="EnableEffectsCheckBox_Changed" Unchecked="EnableEffectsCheckBox_Changed"/>
                            <CheckBox x:Name="EnableShadowsCheckBox" Content="Enable Shadows" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="EnableShadowsCheckBox_Changed" Unchecked="EnableShadowsCheckBox_Changed"/>

                            <TextBlock x:Name="BackgroundOpacityLabel" Text="Background Opacity" Style="{StaticResource SettingLabelStyle}" Margin="0,10,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="BackgroundOpacitySlider" Grid.Column="0" 
                                       Minimum="0" Maximum="100" Value="70" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="BackgroundOpacitySlider_ValueChanged"/>
                                <TextBlock x:Name="BackgroundOpacityValue" Grid.Column="1" 
                                         Text="70%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <!-- Parallax and Movement Settings -->
                            <TextBlock Text="Parallax &amp; Movement" Style="{StaticResource SettingLabelStyle}" Margin="0,20,0,10" FontWeight="Bold"/>
                            
                            <CheckBox x:Name="EnableParallaxCheckBox" Content="Enable Parallax Effect" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="EnableParallaxCheckBox_Changed" Unchecked="EnableParallaxCheckBox_Changed"/>
                            
                            <CheckBox x:Name="EnableMovingSpritesCheckBox" Content="Enable Moving Sprites" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="EnableMovingSpritesCheckBox_Changed" Unchecked="EnableMovingSpritesCheckBox_Changed"/>

                            <TextBlock x:Name="ParallaxIntensityLabel" Text="Parallax Intensity" Style="{StaticResource SettingLabelStyle}" Margin="0,10,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="ParallaxIntensitySlider" Grid.Column="0" 
                                       Minimum="0" Maximum="200" Value="100" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="ParallaxIntensitySlider_ValueChanged"/>
                                <TextBlock x:Name="ParallaxIntensityValue" Grid.Column="1" 
                                         Text="100%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <TextBlock x:Name="CursorMovementSensitivityLabel" Text="Cursor Movement Sensitivity" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="CursorMovementSensitivitySlider" Grid.Column="0" 
                                       Minimum="0" Maximum="200" Value="100" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="CursorMovementSensitivitySlider_ValueChanged"/>
                                <TextBlock x:Name="CursorMovementSensitivityValue" Grid.Column="1" 
                                         Text="100%" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <!-- FPS Optimization Settings -->
                            <TextBlock Text="FPS Optimization" Style="{StaticResource SettingLabelStyle}" Margin="0,20,0,10" FontWeight="Bold"/>
                            
                            <CheckBox x:Name="ReduceParticleEffectsCheckBox" Content="Reduce Particle Effects" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ReduceParticleEffectsCheckBox_Changed" Unchecked="ReduceParticleEffectsCheckBox_Changed"/>
                            
                            <CheckBox x:Name="LowerAnimationQualityCheckBox" Content="Lower Animation Quality" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="LowerAnimationQualityCheckBox_Changed" Unchecked="LowerAnimationQualityCheckBox_Changed"/>
                            
                            <CheckBox x:Name="DisableBackgroundVideosCheckBox" Content="Disable Background Videos" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="DisableBackgroundVideosCheckBox_Changed" Unchecked="DisableBackgroundVideosCheckBox_Changed"/>
                            
                            <CheckBox x:Name="ReduceTextureQualityCheckBox" Content="Reduce Texture Quality" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ReduceTextureQualityCheckBox_Changed" Unchecked="ReduceTextureQualityCheckBox_Changed"/>
                            
                            <CheckBox x:Name="ReduceUIEffectsCheckBox" Content="Reduce UI Effects" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ReduceUIEffectsCheckBox_Changed" Unchecked="ReduceUIEffectsCheckBox_Changed"/>

                            <TextBlock x:Name="ParallaxUpdateRateLabel" Text="Parallax Update Rate (ms)" Style="{StaticResource SettingLabelStyle}" Margin="0,10,0,10"/>
                            <Grid Margin="0,0,0,20">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="ParallaxUpdateRateSlider" Grid.Column="0" 
                                       Minimum="8" Maximum="50" Value="16" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="ParallaxUpdateRateSlider_ValueChanged"/>
                                <TextBlock x:Name="ParallaxUpdateRateValue" Grid.Column="1" 
                                         Text="16ms" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>
                        </StackPanel>

                        <!-- Gameplay Settings -->
                        <StackPanel x:Name="GameplaySettingsPanel" Visibility="Collapsed">
                            <CheckBox x:Name="AutoSaveCheckBox" Content="Enable Auto-Save" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="AutoSaveCheckBox_Changed" Unchecked="AutoSaveCheckBox_Changed"/>
                            
                            <TextBlock x:Name="AutoSaveIntervalLabel" Text="Auto-Save Interval" Style="{StaticResource SettingLabelStyle}" 
                                     Margin="0,10,0,10" IsEnabled="{Binding ElementName=AutoSaveCheckBox, Path=IsChecked}"/>
                            <Grid Margin="0,0,0,20" IsEnabled="{Binding ElementName=AutoSaveCheckBox, Path=IsChecked}">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <Slider x:Name="AutoSaveIntervalSlider" Grid.Column="0" 
                                       Minimum="60" Maximum="1800" Value="300" 
                                       TickFrequency="1" IsSnapToTickEnabled="True"
                                       Style="{StaticResource GameSliderStyle}"
                                       ValueChanged="AutoSaveIntervalSlider_ValueChanged"/>
                                <TextBlock x:Name="AutoSaveIntervalValue" Grid.Column="1" 
                                         Text="5min" Style="{StaticResource SettingValueStyle}" 
                                         Margin="10,0,0,0"/>
                            </Grid>

                            <CheckBox x:Name="ConfirmOnExitCheckBox" Content="Confirm on Exit" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ConfirmOnExitCheckBox_Changed" Unchecked="ConfirmOnExitCheckBox_Changed"/>
                            <CheckBox x:Name="ShowSkipIndicatorCheckBox" Content="Show Skip Indicator" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ShowSkipIndicatorCheckBox_Changed" Unchecked="ShowSkipIndicatorCheckBox_Changed"/>
                            <CheckBox x:Name="ShowLocationTimeCheckBox" Content="Show Location &amp; Time" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="ShowLocationTimeCheckBox_Changed" Unchecked="ShowLocationTimeCheckBox_Changed"/>
                            <CheckBox x:Name="ShowChapterTitleCheckBox" Content="Show Chapter Title" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="ShowChapterTitleCheckBox_Changed" Unchecked="ShowChapterTitleCheckBox_Changed"/>
                        </StackPanel>

                        <!-- Controls Settings -->
                        <StackPanel x:Name="ControlsSettingsPanel" Visibility="Collapsed">
                            <TextBlock x:Name="SkipKeyLabel" Text="Skip Key" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <TextBox x:Name="SkipKeyTextBox" 
                                    Margin="0,0,0,20"
                                    Style="{StaticResource GameTextBoxStyle}"
                                    Text="Enter" 
                                    TextChanged="SkipKeyTextBox_TextChanged"/>

                            <TextBlock x:Name="SaveKeyLabel" Text="Save Key" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <TextBox x:Name="SaveKeyTextBox" 
                                    Margin="0,0,0,20"
                                    Style="{StaticResource GameTextBoxStyle}"
                                    Text="Ctrl+S" 
                                    TextChanged="SaveKeyTextBox_TextChanged"/>

                            <TextBlock x:Name="LoadKeyLabel" Text="Load Key" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <TextBox x:Name="LoadKeyTextBox" 
                                    Margin="0,0,0,20"
                                    Style="{StaticResource GameTextBoxStyle}"
                                    Text="Ctrl+L" 
                                    TextChanged="LoadKeyTextBox_TextChanged"/>

                            <TextBlock x:Name="MenuKeyLabel" Text="Menu Key" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <TextBox x:Name="MenuKeyTextBox" 
                                    Margin="0,0,0,20"
                                    Style="{StaticResource GameTextBoxStyle}"
                                    Text="Escape" 
                                    TextChanged="MenuKeyTextBox_TextChanged"/>

                            <TextBlock x:Name="AutoAdvanceToggleKeyLabel" Text="Auto Advance Toggle Key" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <TextBox x:Name="AutoAdvanceToggleKeyTextBox" 
                                    Margin="0,0,0,20"
                                    Style="{StaticResource GameTextBoxStyle}"
                                    Text="A" 
                                    TextChanged="AutoAdvanceToggleKeyTextBox_TextChanged"/>
                        </StackPanel>

                        <!-- Accessibility Settings -->
                        <StackPanel x:Name="AccessibilitySettingsPanel" Visibility="Collapsed">
                            <CheckBox x:Name="HighContrastCheckBox" Content="High Contrast Mode" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="HighContrastCheckBox_Changed" Unchecked="HighContrastCheckBox_Changed"/>
                            <CheckBox x:Name="LargeTextCheckBox" Content="Large Text Mode" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,10"
                                     Checked="LargeTextCheckBox_Changed" Unchecked="LargeTextCheckBox_Changed"/>
                            <CheckBox x:Name="ReduceAnimationsCheckBox" Content="Reduce Animations" 
                                     Style="{StaticResource SettingCheckBoxStyle}"
                                     Margin="0,0,0,20"
                                     Checked="ReduceAnimationsCheckBox_Changed" Unchecked="ReduceAnimationsCheckBox_Changed"/>
                        </StackPanel>

                        <!-- Language Settings -->
                        <StackPanel x:Name="LanguageSettingsPanel" Visibility="Collapsed">
                            <TextBlock x:Name="LanguageLabel" Text="Language" Style="{StaticResource SettingLabelStyle}" Margin="0,0,0,10"/>
                            <ComboBox x:Name="LanguageComboBox" 
                                     Margin="0,0,0,20"
                                     Style="{StaticResource GameComboBoxStyle}"
                                     SelectionChanged="LanguageComboBox_SelectionChanged">
                                <ComboBox.ItemContainerStyle>
                                    <Style TargetType="ComboBoxItem" BasedOn="{StaticResource GameComboBoxItemStyle}"/>
                                </ComboBox.ItemContainerStyle>
                                <ComboBoxItem Content="English" Tag="English"/>
                                <ComboBoxItem Content="Russian" Tag="Russian"/>
                                <ComboBoxItem Content="Ukrainian" Tag="Ukrainian"/>
                                <ComboBoxItem Content="Polish" Tag="Polish"/>
                            </ComboBox>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>

            <!-- Buttons -->
            <StackPanel Grid.Row="2" 
                       Orientation="Horizontal" 
                       HorizontalAlignment="Right"
                       Margin="0,20,0,0">
                <Button x:Name="ResetButton" 
                       Content="Reset to Defaults" 
                       Style="{StaticResource ResetButtonStyle}"
                       Margin="0,0,10,0"
                       Click="ResetButton_Click"/>
                <Button x:Name="CancelButton" 
                       Content="Cancel" 
                       Style="{StaticResource DialogButtonStyle}"
                       Margin="0,0,10,0"
                       Click="CancelButton_Click"/>
                <Button x:Name="ApplyButton" 
                       Content="Apply" 
                       Style="{StaticResource DialogButtonStyle}"
                       Click="ApplyButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>

